<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Admin • KMITL Shuttle</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">

  <!-- Leaflet + fallback -->
  <link id="leaflet-css"
        rel="stylesheet"
        href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        onerror="this.href='https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css'">
  <script id="leaflet-js"
          src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
          onerror="var s=document.createElement('script');s.src='https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js';document.head.appendChild(s);"></script>

  <link rel="stylesheet" href="{{ url_for('admin.static', filename='style.css') }}">

  <style>
    /* ให้ container ขวาสูงแน่นอน แล้วให้ #map กิน 100% ของ panel */
    .right-map .panel{ height: 75vh; min-height: 480px; }
    #map{ height: 100%; width: 100%; }
  </style>
</head>
<body class="app">
  <nav class="topbar">
    <div class="container-fluid d-flex justify-content-between align-items-center">
      <div class="brand"><span class="dot"></span><span class="brand-text">KMITL Shuttle • Admin</span></div>
      <a class="btn btn-ghost btn-sm" href="/">หน้าแรก</a>
    </div>
  </nav>

  <div class="layout-admin">
    <aside class="side-orange">
      <span class="side-item active">ค้นหา</span>
      <span class="side-item">ป้าย</span>
      <span class="side-item">สาย</span>
      <span class="side-item">ตั้งค่า</span>
    </aside>

    <section class="left-panel">
      <div class="panel mb-3">
        <h6 class="mb-2">ค้นหาป้าย</h6>
        <input id="search-stop" class="form-control form-control-sm mb-3" placeholder="พิมพ์ชื่อป้าย...">
        <ul id="stop-list" class="stop-list mb-0"></ul>
      </div>
      <div class="panel">
        <div class="row g-2 text-center">
          <div class="col-4"><div class="kpi-card"><span class="kpi-icon kpi-green"></span><div><div class="kpi-label">Online</div><div id="kpi-online" class="kpi-value">—</div></div></div></div>
          <div class="col-4"><div class="kpi-card"><span class="kpi-icon kpi-indigo"></span><div><div class="kpi-label">Routes</div><div id="kpi-routes" class="kpi-value">—</div></div></div></div>
          <div class="col-4"><div class="kpi-card"><span class="kpi-icon kpi-amber"></span><div><div class="kpi-label">Stops</div><div id="kpi-stops" class="kpi-value">—</div></div></div></div>
        </div>
      </div>
    </section>

    <section class="right-map">
      <div class="panel p-0">
        <div id="map"></div>
      </div>
    </section>
  </div>

  <script src="{{ url_for('admin.static', filename='admin-dashboard.js') }}"></script>
</body>
</html>
